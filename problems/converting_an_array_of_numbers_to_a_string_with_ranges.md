[/ Меню](https://github.com/samatakaya1/Interview-material/blob/main/README.md)   [/ Список задач](https://github.com/samatakaya1/Interview-material/blob/main/problems/problems.md)
---

# Задача "Преобразование массива чисел в строку с диапазонами"

## Условие задачи

Вход: массив чисел.  
Выход: строка, где соседние числа объединены в диапазоны.

### Пример:

- **Вход:** `[1, 4, 5, 2, 3, 9, 8, 11, 0]`  
  **Выход:** `'0-5,8-9,11'`

- **Вход:** `[1, 4, 3, 2]`  
  **Выход:** `'1-4'`

### Уточнения:
1. Если числа не последовательные, они записываются отдельно.  
   Пример: `[1, 4, 5]` → `'1,4-5'`.
2. Числа нужно отсортировать перед обработкой.
3. Диапазон записывается в виде `x-y`, если между числами разница более 1.

---

## Шаги решения

### 1. Сортировка массива
Первый шаг — отсортировать массив чисел, чтобы они шли в порядке возрастания. Это нужно, чтобы легче определять диапазоны.

### 2. Поиск диапазонов
Итерация по отсортированному массиву для формирования диапазонов:
- Запоминаем начало диапазона.
- Если текущее число **не подряд** идёт за предыдущим, завершаем текущий диапазон.

### 3. Формирование строки
После того как диапазоны найдены, объединяем их в строку через запятую.

---

## Решение

```javascript
function range(arr) {
  // Шаг 1: Сортируем массив
  arr.sort((a, b) => a - b);

  let result = []; // Массив для хранения строк диапазонов
  let start = arr[0]; // Начало текущего диапазона
  let end = arr[0]; // Конец текущего диапазона

  // Шаг 2: Итерация по массиву
  for (let i = 1; i <= arr.length; i++) {
    // Если текущее число подряд за предыдущим, обновляем конец диапазона
    if (arr[i] === end + 1) {
      end = arr[i];
    } else {
      // Если диапазон закончился, добавляем его в результат
      if (start === end) {
        result.push(`${start}`); // Одно число
      } else {
        result.push(`${start}-${end}`); // Диапазон
      }

      // Начинаем новый диапазон
      start = arr[i];
      end = arr[i];
    }
  }

  // Шаг 3: Объединяем диапазоны в строку
  return result.join(',');
}

// Примеры
console.log(range([1, 4, 5, 2, 3, 9, 8, 11, 0])); // '0-5,8-9,11'
console.log(range([1, 4, 3, 2])); // '1-4'
```

---

## Пояснение кода

1. **Сортировка массива:**  
   `arr.sort((a, b) => a - b)` упорядочивает элементы массива от меньшего к большему.

2. **Поиск диапазонов:**
    - Если текущее число `arr[i]` является следующим за `end`, то обновляем конец диапазона: `end = arr[i]`.
    - Если числа не подряд, добавляем текущий диапазон в результат и начинаем новый.

3. **Добавление диапазонов в строку:**
    - Если диапазон состоит из одного числа (например, `4`), добавляем только `start`.
    - Если диапазон содержит несколько чисел (например, `1-4`), добавляем `start-end`.

4. **Формирование строки:**  
   Метод `result.join(',')` объединяет диапазоны через запятую.

---

## Сложность алгоритма

- **По времени:**
    - Сортировка массива занимает `O(n log n)`, где `n` — длина массива.
    - Обход массива — `O(n)`.
    - Итоговая сложность: **`O(n log n)`**.

- **По памяти:**  
  Используется дополнительный массив для хранения строк диапазонов, то есть **`O(n)`**.

---

## Тесты

```javascript
console.log(range([])); // ''
console.log(range([1])); // '1'
console.log(range([1, 2, 3, 5, 6, 7, 10])); // '1-3,5-7,10'
console.log(range([10, 1, 5, 2, 6, 3, 7])); // '1-3,5-7,10'
console.log(range([-2, -1, 0, 1, 3])); // '-2-1,3'
```

---
[<- К списку задач](https://github.com/samatakaya1/Interview-material/blob/main/problems/problems.md)

